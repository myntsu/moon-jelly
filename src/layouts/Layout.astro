---
interface Props {
  title: string;
}

const { title } = Astro.props;

import "../css/global.scss";

import Header from "../components/Header.astro";
import Nav from "../components/Nav.astro";
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="description"
      content="Astro description"
    />
    <meta
      name="viewport"
      content="width=device-width"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="/favicon.svg"
    />
    <meta
      name="generator"
      content={Astro.generator}
    />
    <title>{title}</title>
  </head>
  <body>
    <div class="main-container">
      <Header />
      <Nav />
      <main>
        <div class="content">
          <slot />
        </div>
      </main>
    </div>
  </body>
</html>

<style lang="scss" is:global>
  .main-container {
    --_nav-width: 350px;
    --_header-height: 100px;
    container-type: inline-size;

    display: grid;
    grid-template-areas:
      "header header"
      "nav main";
    grid-template-columns: var(--_nav-width) 1fr;
    grid-template-rows: var(--_header-height) 1fr;

    height: 100%;
    height: 100svh;

    &:has(nav[aria-expanded="false"]) {
      --_nav-width: 0px;
    }

    @media (max-width: 870px) {
      --_nav-width: 0px;
      grid-template-areas:
        "header header"
        "main main";

      nav {
        position: absolute;
        top: var(--_header-height);
        min-height: calc(100% - var(--_header-height));
        translate: -350px 0px;

        &:is(.visible) {
          translate: 0px 0px;
          li {
            &:is(:hover, :focus-visible, .selected) {
              a {
                padding-inline-start: 1rem !important;
              }
            }
          }
        }
      }
    }
  }

  main {
    grid-area: main;

    container-type: inline-size;

    background-image: url(https://cdn.discordapp.com/attachments/314296024833196036/1164681617789431938/latest.png?ex=65441948&is=6531a448&hm=9f25b100752249d3b3ab6332bfa80da50a0ad4af22cb42f453f6c40531b49795&);
    background-size: contain;
    background-repeat: no-repeat;
    background-position: center;
    background-clip: fixed;
    overflow-y: scroll;

    .content {
      min-height: 500%;
      padding: 1rem;
      z-index: 0;
      background-color: hsl(var(--dark-500));
      border: 1px solid hsl(200 70% 70%);

      & > * {
        width: 100%;
        max-width: 600px;
        margin-inline: auto;
        padding: 1rem;
        border: 1px solid hsl(0 70% 70%);
      }
    }
  }

  @container (max-width: 600px) {
    main {
      .content {
        align-content: flex-start;
        flex-wrap: wrap;
        gap: 1rem;
      }
    }
  }
</style>

<script>
  import "../script/copyright.js";
  import "../script/hamburger.js";
  import "../script/settings.js";
</script>
